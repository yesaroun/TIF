# LangChain 전체 구조

2024년 8월 LangChain의 전체 구조는 다음과 같다.

![](/Users/ytlee/TIF/LLM/RAG/Books/랭체인과_랭그래프로_구현하는_RAG/attachments/89D4AB22-84D7-49C8-A05A-102F7296C3D3.jpeg)

LangChain의 각종 컴포넌트를 제공하는 패키지 그룹(langchain-core, langchain-openai 등의 Python 패키지)
또한 공식적으로 제공되는 에코시스템으로 LangSmith, LangServer, LangGraph 가 있다.
그리고 LangChain을 사용한 구현 템플릿이 LangChain Templates로 제공된다.

# LangChain의 다양한 컴포넌트를 제공하는 패키지 그룹

LangChain 개발 초기에는 'langchain' 하나의 패키지에 모든 기능이 포함돼 있었다. 그러나 각종 LLM과 데이터베이스 등의 통합이 증가함에 따라 langcahin 하나의 패키지에 대한 의존 관계가 매우
많아지는 등의 문제가 발생했다. 그래서 LangChain v0.1로 업데이트 하기 전후로 코어 기능은 `langchain-core` 패키지가 제공하고, 주변 기능은 별도의 패키지가 제공하도록 분할이 진행되었다.

# LangSmith 설정

LangSmith는 LangChain에서 공식적으로 제공하는 프로덕션 등급의 LLM 애플리케이션을 위한 플랫폼이다.
LangChain의 작동 트레이스를 쉽게 수집할 수 있어 개발 중 디버깅에 도움이 된다.

```python
import os

os.environ["LANGCHAIN_TRACING_V2"] = "true"
os.environ["LANGCHAIN_ENDPOINT"] = "https://api.smith.langchain.com"
os.environ["LANGCHAIN_API_KEY"] = userdata.get("LANGCHAIN_API_KEY")
os.environ["LANGCHAIN_PROJECT"] = "agent-book"
```


# LangChain의 주요 컴포넌트

- LLM/Chat model: 다양한 언어 모델과의 통합
- Prompt template: 프롬프트 템플릿
- Example selector: Few-shot 프롬프팅의 예시를 동적으로 선택
- Output parser: 언어 모델의 출력을 지정한 형식으로 변환
- Chain: 각종 컴포넌트를 사용한 처리의 연쇄
- Document loader: 데이터 소스에서 문서를 읽어 들임
- Document transformer: 문서에 어떤 변화를 가함
- Embedding model: 문서를 벡터화함
- Vector store: 벡터화한 문서의 저장소
- Retriever: 입력 텍스트와 관련된 문서를 검색
- Tool: Function calling 등에서 모델이 사용하는 함수를 추상화
- Toolkit: 함께 사용하는 것을 가정한 Tool 컬렉션
- Chat history: 대화 이력의 저장소로서의 각종 데이터베이스와의 통합
