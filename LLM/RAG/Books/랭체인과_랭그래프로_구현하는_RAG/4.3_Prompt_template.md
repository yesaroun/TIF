# PromptTemplate

이름 그대로 PromptTemplate를 사용하면 프롬프트를 템플릿화 할 수 있다.

```python
from langchain_core.prompts import PromptTemplate

prompt = PromptTemplate.from_template("""다음 요리의 레시피를 생각해 주세요.
요리명: {dish}""")

prompt_value = prompt.invoke({"dish": "카레"})
print(prompt_value.text)
"""
다음 요리의 레시피를 생각해 주세요.
요리명: 카레
"""
```

PromptTemplate은 프로그램에서 문자열의 일부를 대체하는 것뿐이며, 내부에서 LLM을 호출하는 것은 아니다.

# ChatPromptTemplate

PromptTemplate을 Chat Completions API 등의 채팅 형식 모델에 대응시킨 것이다.  
SystemMessage, HumanMessage, AIMessage를 각각 템플릿화하여 ChatPromptTemplate이라는 클리스로 함께 다룰 수 있따.

```python
from lanchain_core.prompts import ChatPromptTemplate

prompt = ChatPromptTemplate.from_messages(
    [
        ("system", "사용자가 입력한 요리의 레시피를 생각해 주세요."),
        ("human", "{dish}"),
    ]
)

prompt_value = prompt.invoke({"dish": "카레"})
print(prompt_value)
"""
messages=[SystemMessage(content='사용자가 입력한 요리의 레시피를 생각해 주세요.'),
HumanMessage(content='카레')]
"""
```

# MessagesPlaceholder

채팅 형식의 프롬프트에는 대화 이력처럼 여러 메시지가 들어가는 플레이스홀더를 두고 싶은 경우가 많다. 이럴때 사용할 수 있는 것이 MessagePlaceholder이다.

```python
from langchain_core.messages import AIMessage, HumanMessage
from langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder

prompt = ChatPromptTemplate.from_messages(
    [
        ("system", "You are a helpful assistant."),
        MessagesPlaceholder("chat_history", optional=True),
        ("human", "{input}"),
    ]
)

prompt_value = prompt.invoke(
    {
        "chat_history": [
            HumanMessage(content="안녕하세요! 저는 존이라고 합니다!"),
            AIMessage("안녕하세요, 존님! 어떻게 도와드릴까요?"),
        ],
        "input": "제 이름을 아시나요?",
    }
)
print(prompt_value)
"""
messages=[
    SystemMessage(content='You are a helpful assistant.'), 
    HumanMessage(content='안녕하세요! 저는 존이라고 합니다!'), 
    AIMessage(content='안녕하세요, 존님! 어떻게 도와드릴까요?')
    HumanMessage(content='제 이름을 아시나요?')
]
"""
```

이와 같이 채팅 형식 모델의 프롬프트에 대화 이력을 포함하는 경우 사용한다.

# LangSmith의 Prompts

LLM 애플리케이션을 개발하다 보면 프롬프트를 소스 코드와 별도로 관리하고 싶은 경우가 많다. LangSmith의 'Prompts'를 사용하면 프롬프트의 공유와 버전 관리를 할 수 있다.

이 외에도 LangSmith상에서 프롬프트를 테스트할 수 있는 Playgroud 같은 기능도 있다.
