docker search를 통해 검색한 이미지를 pull 명령어로 내려받아 사용할 수도 있지만 도커로 개발하는 많은 경우에는 컨테이너에 애플리케이션을 위한 특정 개발 환경을 직접 구축한 뒤 사용자만의 이미지를 직접 생성해야 할 것입니다. 이를 위해 컨테이너 안에서 작업한 내용을 이미지로 만드는 방법을 먼저 보겠다.

이미지로 만들 컨테이너를 생성한다. 컨테이너 내부에 first라는 이름의 파일 하나를 생성해 기존의 이미지로부터 변경사항을 만든다.

```bash
docker run -i -t --name commit_test ubuntu:24.04

echo test_first! >> first
```

docker commit 명령어의 형식은 다음과 같다. 먼저 commit의 옵션을 지정하고 커밋할 컨테이너의 이름을 명시한 뒤 생성될 이미지의 이름을 입력

```bash
docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]
```

다음 명령은 commit_test라는 컨테이너를 commit_test:first 라는 이름의 이미지로 생성

```bash
docker commit \
-a "alicek106" -m "my first commit" \
commit_test \
commit_test:first
```

저장소 이름은 입력하지 않아도 상관없지만 이미지의 태그를 입력하지 않으면 자동을 latest 로 설정된다. 위에서는 이미지의 이름을 commit_test로, 태그를 first로 설정

`-a` 옵션은 author를 뜻하며, 이미지의 작성자를 나타내는 메타데이터를 이미지에 포함시킨다.
`-m` 옵션은 커밋 메시지를 뜻하며, 이미지에 포함될 부가 설명을 입력

```bash
docker images
>>>
REPOSITORY    TAG       IMAGE ID       CREATED              SIZE
commit_test   first     fe710c3fb893   About a minute ago   101MB
ubuntu        24.04     a7ff8584a5ea   3 weeks ago          101MB
```

이번에는 commit_test:first 이미지로 새로운 이미지를 생성해보겠다.
commit_test:first 이미지로 컨테이너를 생성한 뒤 second라는 파일을 추가해 comit_test:second라는 이미지를 새롭게 생성한다.

```bash
docker run -i -t --name commit_test2 commit_test:first
root@66201e8b09b8:/# echo test_second! >> second

docker commit \
-a "alicek106" -m "my second commit" \
commit_test2 \
commit_test:second
```

```bash
docker images   
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
commit_test   second    c67691a17ae4   8 seconds ago   101MB
commit_test   first     fe710c3fb893   6 minutes ago   101MB
ubuntu        24.04     a7ff8584a5ea   3 weeks ago     101MB
```